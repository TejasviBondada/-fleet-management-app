<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Page</title>
    <style>
        *{
            background-color: rgb(206, 232, 247);
        }
       #main {
            display:flex;
            flex-wrap: wrap;
            gap:10px;
        }
        .card{
            border:1px solid black;
            width:20%;
            padding:20px;
        }
        nav{
            display:flex;
            gap:15px;
        }
    </style>
</head>
<body>
    <center><h2>Welcome to fleet Dashboard</h2></center>
    <br>
    <nav>
        <label>Category</label>
        <select id="categoryFilter" onchange="applyFilters()">
            <option>All</option>
            <option>Auto</option>
            <option>Bus</option>
            <option>Car</option>
            <option>Truck</option>
        </select>
        <label>Availability</label>
        <select id="availabilityFilter" onchange="applyFilters()">
            <option>All</option>
            <option>Available</option>
            <option>Unavailable</option>
        </select>

        <button onclick="clearFilters()">Clear Filter</button>

    </nav>
    <hr>
    <aside style="width:250px; padding:10px; border:1px solid black">
        <h3>Add Vehicle</h3>
        <form>
            <label>Reg No:</label>
            <input id="reg" type="text" placeholder="Reg No"><br>
            <label>Category:</label>
            <select id="category">
                <option>Auto</option>
                <option>Bus</option>
                <option>Car</option>
                <option>Truck</option>
            </select><br>
            <label>Driver Name</label>
            <input id="driver" type="text" placeholder="Driver's Name"><br>
            <label>Availability</label>
            <select id="avail">
                <option>Available</option>
                <option>Unavailable</option>
            </select><br>
            <button onclick="addVehicle()">Add Fleet</button>
        </form>

    <div id="main"></div>
</aside>
    <script>
        let data=[];
        function addVehicle(){
            let reg=document.getElementById("reg").value;
            let cat=document.getElementById("category").value;
            let driver=document.getElementById("driver").value;
            let avail=document.getElementById('avail').value;

            let vehicle={
                reg,cat,driver,avail,
                img:"https://coding-platform.s3.amazonaws.com/dev/lms/tickets/5e80fcb6-3f8e-480c-945b-30a5359eb40e/JNmYjkVr3WOjsrbu.png"            
            };
            data.push(vehicle);
            render(data);
        }

        function render(arr){
            let main=document.getElementById("main");
            arr.forEach((v,i) =>{
                let card=document.getElementById("div");
                card.className="card";
                card.innerHTML=`<img src="$(v.img)">
                                <p>Regi No : $(v.reg)</p>
                                <p>Category : $(v.cat)</p>
                                <p>Driver : $(v.driver)</p>
                                <p>Status : $(v.avail)</p>
                <button onclick="updateDriver(${i})">Update Driver</button>
                <button onclick="changeAvail(${i})">Change Availability</button>
                <button onclick="deleteVehicle(${i})">Delete Vehicle</button>`;
                main.appendChild(card);
            });
        }

        function updateDriver(i){
            let name=prompt("Enter new driver name:");
            if(name){
                data[i].driver=name;
                render(data);
            }
        }
        function changeAvail(i){
            data[i].avail=data[i].avail==="Available" ? "Unavailable";
            render(data);
        }
        function deleteVehicle(i){
            data.splice(i,1);
            render(data);
        }

        function applyFilters(){
            let catVal=document.getElementById("categoryFilter").value;
            let availVal=document.getAnimations("availabilityFilter").value;
            let filtered=data.filter(v => {
                let c=(catVal==="All" || v.cat===catVal);
                let a=(availVal==="All" || v.avail===availVal);
                return c && a;
            });
            render(filtered);
        }

        function clearFilters(){
            document.getElementById("categoryFilter").value="All";
            document.getElementById("availabilityFilter").value="All";
            render(data);
        }
    </script>

</body>
</html>